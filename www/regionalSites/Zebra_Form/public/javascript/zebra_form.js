(function(f){f.Zebra_Form=function(x,y){var g=this,N={scroll_to_error:!0,tips_position:"left",close_tips:!0,validate_on_the_fly:!1,validate_all:!1,assets_path:null};g.settings={};var r={},J={},z={},G=[],n={},s={},C=!1,D=!1,u,v,l=f(x);g.filter_input=function(a,f,b){var e,c="";if(window.event)e=window.event.keyCode,f=window.event;else if(f)e=f.which;else return!0;switch(a){case "alphabet":c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";break;case "digits":case "number":case "float":c="0123456789"; break;case "alphanumeric":c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";break;default:return!0}b&&(c+=b);b=f.srcElement?f.srcElement:f.target||f.currentTarget;if(null==e||0==e||8==e||9==e||13==e||27==e)return!0;e=String.fromCharCode(e);return("v"==e||"a"==e||"c"==e||"x"==e)&&f.ctrlKey||-1<c.indexOf(e)||"number"==a&&"-"==e&&0==E(b)||"float"==a&&("-"==e&&0==E(b)||"."==e&&0!=E(b)&&null==b.value.match(/\./))?!0:!1};g.init=function(){g.settings=f.extend({},N,y);l.find("option.dummy").remove(); f("div.error",l).each(function(){f("div.close a",f(this)).bind("click",function(c){c.preventDefault();f(this).closest("div.error").animate({height:0,opacity:0},250,function(){f(this).remove()})})});v=f(".control",l);v.each(function(){var c=f(this),a={id:c.attr("id"),name:c.attr("name"),type:H(c)},b=c.closest(".row");void 0!=a.name&&(a.name=a.name.replace(/\[\]$/,""));b.length&&c.bind({focus:function(){b.addClass("highlight")},blur:function(){b.removeClass("highlight")}});if(c.hasClass("inside")&& ("text"==a.type||"password"==a.type||"textarea"==a.type)||c.hasClass("show-character-counter")||("text"==a.type||"password"==a.type)&&c.data("prefix"))var d=jQuery('<span class="Zebra_Form_Wrapper"></span>').css({display:c.css("display"),position:"static"==c.css("position")?"relative":c.css("position"),"float":c.css("float"),top:c.css("top"),right:c.css("right"),bottom:c.css("bottom"),left:c.css("left")}),c=c.replaceWith(d).css({position:"relative",top:"auto",right:"auto",bottom:"auto",left:"auto"}).appendTo(d); if(!c.hasClass("inside")||"text"!=a.type&&"password"!=a.type&&"textarea"!=a.type)c.hasClass("other")&&"select-one"==a.type&&(L(c),c.change(function(){L(c)}));else{var d=c.position(),e="text"==a.type||"password"==a.type?jQuery("<input>").attr({type:"text","class":"Zebra_Form_Placeholder",autocomplete:"off",value:c.attr("title")}):jQuery("<textarea>").attr({"class":"Zebra_Form_Placeholder",autocomplete:"off"}).html(c.attr("title"));"password"==a.type&&c.css("fontFamily","inherit");e.css({fontFamily:c.css("fontFamily"), fontSize:c.css("fontSize"),fontStyle:c.css("fontStyle"),fontWeight:c.css("fontWeight"),left:d.left,top:d.top,width:parseInt(c.css("width"),10)+(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("borderRightWidth"),10)||0),height:parseInt(c.css("height"),10)+(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("borderBottomWidth"),10)||0),paddingTop:parseInt(c.css("paddingTop"),10)||0,paddingRight:parseInt(c.css("paddingRight"),10)||0,paddingBottom:parseInt(c.css("paddingBottom"),10)|| 0,paddingLeft:parseInt(c.css("paddingLeft"),10)||0,marginTop:parseInt(c.css("marginTop"),10)||0,marginRight:parseInt(c.css("marginRight"),10)||0,marginBottom:parseInt(c.css("marginBottom"),10)||0,marginLeft:parseInt(c.css("marginLeft"),10)||0}).insertAfter(c).hide();c.removeAttr("title");e.bind("focus",function(){c.focus()});c.bind({focus:function(){e.hide()},blur:function(){""==f(this).val()&&e.show()}});c.data("Zebra_Form_Placeholder",e);G.push(c);"password"==a.type&&c.css({fontFamily:"Verdana, Tahoma, Arial"})}"undefined"!= typeof g.settings.validation_rules[a.name]&&g.register(c,!1);if(("text"==a.type||"textarea"==a.type||"password"==a.type)&&c.attr("maxlength")&&(c.data("maxlength",c.attr("maxlength")),c.bind("keyup",function(a){a=f(this);var c=a.data("maxlength"),b=K(a);a.attr("maxlength",c-b);a.hasClass("show-character-counter")&&(a=c-b-a.val().length,q.html(0>a?"<span>"+a+"</span>":a))}),c.hasClass("show-character-counter"))){var d=c.position(),q=jQuery("<div>",{"class":"Zebra_Character_Counter",css:{visibility:"hidden"}}).html(c.data("maxlength")).insertAfter(c); width=q.outerWidth();height=q.outerHeight();q.css({top:d.top+c.outerHeight()-height/1.5,left:d.left+c.outerWidth()-width/1.5,width:q.width(),visibility:"visible"});c.trigger("keyup")}"text"!=a.type&&"password"!=a.type||!c.data("prefix")||(a=c.data("prefix"),d=decodeURIComponent(a.replace(/\+/g," ")).match(/^img\:(.*)/i),a=null!=d?jQuery("<img>",{src:d[1]}):jQuery("<div>",{css:{fontFamily:c.css("fontFamily"),fontSize:c.css("fontSize")}}).html(decodeURIComponent(a.replace(/\+/g," "))),a.attr({"class":"Zebra_Form_Input_Prefix"}).css({visibility:"hidden", position:"absolute"}).insertAfter(c),a.css({top:(c.outerHeight()-a.outerHeight())/2,left:parseInt(c.css("paddingLeft"),10),visibility:"visible"}),c.css({paddingLeft:"+="+a.outerWidth(!0)}),"border-box"!=c.css("boxSizing")&&c.css({width:"-="+a.outerWidth(!0)}),void 0!=e&&e.css({left:"+="+a.outerWidth(!0)}))});f("input.submit, input.image",l).bind("click",function(){l.data("zf_clicked_button",f(this).attr("id"))});for(var a in g.settings.validation_rules)for(var d in g.settings.validation_rules[a])"dependencies"== d&&function(){var c=g.settings.validation_rules[a][d];"string"==typeof c[1]&&(c=c[0]);for(var b in c){var e=f('input[name="'+b+'"],select[name="'+b+'"],textarea[name="'+b+'"]',x);0==e.length&&(e=f('input[name="'+b+'[]"],select[name="'+b+'[]"],textarea[name="'+b+'[]"]',x));if(0<e.length){n[b]||(n[b]={conditions:{},elements:[],event:!1});-1==f.inArray(a,n[b].elements)&&n[b].elements.push(a);var k=B(c[b]),p=H(f(e[0]));n[b].conditions[k]||(n[b].conditions[k]=function(){var a=c[b],d=[];e.each(function(){switch(p){case "radio":case "checkbox":this.checked&& d.push(f(this).val());break;case "image":case "submit":l.data("zf_clicked_button")==f(this).attr("id")&&d.push("click");break;default:d.push(f(this).val())}});var g=!1;0<d.length&&(f.isArray(a)?f.each(a,function(c){var b=0;f.each(d,function(e){f.isArray(a[c])||d[e]!=a[c]?f.isArray(a[c])&&-1<f.inArray(d[e],a[c])&&b++:g=!0});g||b!=a[c].length||(g=!0)}):f.each(d,function(c){a==d[c]&&(g=!0)}));return g})}}0<e.length&&!1==n[b].event&&(n[b].event=function(a){f.each(n[b].elements,function(a){var c=g.settings.validation_rules[n[b].elements[a]].dependencies, d=!0;if("string"==typeof c[1]){var e=c[1].split(","),e=f.map(e,function(a){return f.trim(a)}),h=e.shift();arguments=e;c=c[0]}for(var k in c)e=B(c[k]),n[k].conditions[e]()||(d=!1);if(void 0!=c[b]&&void 0!=h){c=window;h=h.split(".");k=h.pop();for(e=0;e<h.length;e++)if(void 0!=c[h[e]])c=c[h[e]];else throw Error('"'+h[e]+"\" namespace doesn't exist in the global scope!");try{c[k].apply(void 0,[d].concat(arguments))}catch(p){throw Error('"'+k+'" callback function was not found!');}}})},e.bind("checkbox"== p||"radio"==p||"select-multiple"==p||"submit"==p||"button"==p?"click":"select-one"==p?"change":"blur",n[b].event));e.length&&n[b].event()}();var b=f(".captcha-container");if(0<b.length){var e=f("img",b);f("a",b).bind("click",function(a){a.preventDefault();e.attr("src",e.attr("src").replace(/nocache=[0-9]+/,"nocache="+(new Date).getTime()))})}l.bind("submit",function(a){!1!=C||void 0==g.settings.validation_rules||D||g.validate()||a.preventDefault();D=!1});0<G.length&&setInterval(O,50);u={init:function(){this.name= this.searchString(this.dataBrowser)||"";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||""},searchString:function(a){for(var b=0;b<a.length;b++){var d=a[b].string,e=a[b].prop;this.versionSearchString=a[b].versionSearch||a[b].identity;if(d){if(-1!=d.indexOf(a[b].subString))return a[b].identity}else if(e)return a[b].identity}},searchVersion:function(a){var b=a.indexOf(this.versionSearchString);if(-1!=b)return parseFloat(a.substring(b+this.versionSearchString.length+ 1))},dataBrowser:[{string:navigator.userAgent,subString:"Firefox",identity:"firefox"},{string:navigator.userAgent,subString:"MSIE",identity:"explorer",versionSearch:"MSIE"}]};u.init()};g.attach_tip=function(a,d){var b=a.attr("id");void 0==r[b]&&(r[b]={element:a});r[b].message=d;g.show_errors(a)};g.clear_errors=function(){f(".Zebra_Form_error_iFrameShim").remove();f(".Zebra_Form_error_message").remove();v.removeClass("error");z={}};g.end_file_upload=function(a,d){var b=f("#"+a);if(b.length&&(g.clear_errors(), l.removeAttr("target"),setTimeout(function(){f("#"+a+"_iframe").remove()},1E3),f("#"+a+"_spinner").remove(),void 0!=r[a]))if(void 0!=d&&"object"==typeof d&&void 0!=d[0]&&void 0!=d[1]&&void 0!=d[2]&&void 0!=d[3]&&b.data("file_info",d),!0!==g.validate_control(b))b.val(""),b.css("visibility","visible"),g.show_errors(b);else{var e=b.offset(),c=jQuery("<div>",{"class":"Zebra_Form_filename",css:{left:e.left,top:e.top,width:b.outerWidth(),opacity:0}}).html(d[0]),e=jQuery("<a>",{href:"javascript:void(0)"}).html("x").bind("click", function(a){a.preventDefault();c.remove();b.val("");b.data("file_info")&&b.removeData("file_info");b.css("visibility","visible")});f("body").append(c.append(e));c.css({top:parseInt(c.css("top"),10)+(b.outerHeight()-c.outerHeight())/2,opacity:1})}};g.hide_error=function(a,d){var b=f("#"+a);if(void 0==d&&g.settings.validate_on_the_fly&&!0!==g.validate_control(b))g.show_errors(b,!1);else{var e=f("#Zebra_Form_error_message_"+a);0<e.length&&(b.removeClass("error"),e.animate({opacity:0},250,function(){var b= e.data("shim");void 0!=b&&b.remove();e.remove();delete z[a]}))}};g.register=function(a,d){var b={id:a.attr("id"),name:a.attr("name"),type:H(a)};if(void 0!=b.name){b.name=b.name.replace(/\[\]$/,"");a.hasClass("time")&&(b.name=b.name.replace(/\_(hours|minutes|seconds|ampm)$/,""));switch(b.type){case "radio":case "checkbox":a.bind({click:function(){g.hide_error(b.name)},blur:function(){g.hide_error(b.name)}});void 0==J[b.id]&&(J[b.id]=l.find("input[name^="+b.name+"]"));break;case "file":var e=a.clone(!0); e.attr("value","");a.replaceWith(e);e.bind({keypress:function(a){e.attr("value","")},change:function(){if(void 0!=r[b.name].rules.upload){g.hide_error(b.name);e.data("file_info")&&e.removeData("file_info");var c=jQuery('<iframe id="'+b.id+'_iframe" name="'+b.id+'_iframe">',{src:"javascript:void(0)",scrolling:"no",marginwidth:0,marginheight:0,width:0,height:0,frameborder:0,allowTransparency:"true"}).css({position:"absolute",top:0,left:-1E3});f("body").append(c);c=l.attr("action");l.attr("action",decodeURIComponent(g.settings.assets_path)+ "process.php?form="+l.attr("id")+"&control="+b.id+"&path="+encodeURIComponent(decodeURIComponent(r[b.name].rules.upload[0]))+"&nocache="+(new Date).getTime());l.attr("target",b.id+"_iframe");a.css("visibility","hidden");var d=a.offset(),d=jQuery("<div>",{id:b.id+"_spinner","class":"Zebra_Form_spinner",css:{left:d.left,top:d.top}});f("body").append(d);C=!0;l.trigger("submit");l.attr("action",c);C=!1}},blur:function(){g.hide_error(b.name)}});a=e;break;case "select-one":case "select-multiple":a.bind({change:function(){g.hide_error(b.name)}, blur:function(){g.hide_error(b.name)}});break;default:a.blur(function(){var c=b.name;if("text"==b.type&&a.hasClass("other")){var d=b.id.match(/^(.*)\_other$/);null!=d&&(c=d[1])}g.hide_error(c)})}var c=g.settings.validation_rules[b.name];if(null!=c)if(void 0==d)v=f(".control",l),f.each(v,function(d,e){if(e==a.get(0)){f(e);for(var g=null,q=d-1;null==g&&void 0!=v[q];)g=f(v[q]).attr("id"),q--;if(r[g]){q={};for(d in r)q[d]=r[d],g==d&&(q[b.id]={element:a,rules:c});r=q}else g={},g[b.id]={element:a,rules:c}, f.extend(r,g)}});else if(void 0!=d&&f("#"+d).length){f("#"+d).attr("id");var w={};for(index in r)w[index]=r[index],previous_element_id==index&&(w[b.id]={element:a,rules:c});r=w}else void 0!=d&&!1===d&&(r[b.id]={element:a,rules:c})}};g.show_errors=function(a,d){void 0!=d&&!1===d||g.clear_errors();var b=0;for(index in r){var e=r[index],c=e.element,w={id:c.attr("id"),name:c.attr("name"),type:H(c)},h="radio"==w.type||"checkbox"==w.type?w.name.replace(/\[\]$/,""):w.id;c.hasClass("time")&&(h=w.name.replace(/\_(hours|minutes|seconds|ampm)$/, ""));if((void 0==a||a.get(0)==c.get(0))&&void 0!=e.message&&void 0==z[h]){"none"==c.css("display")||void 0!=d&&!1===d||g.settings.validate_all&&0<b||c.focus();var k=f.extend(c.offset()),k=f.extend(k,{right:Math.floor(k.left+c.width())}),p=jQuery("<div/>",{"class":"Zebra_Form_error_message",id:"Zebra_Form_error_message_"+h,css:{opacity:0}}),e=jQuery("<div/>",{"class":"message"+(g.settings.close_tips?"":" noclose"),css:{_width:"auto"}}).html(e.message).appendTo(p);g.settings.close_tips&&jQuery("<a/>", {href:"javascript:void(0)","class":"close"+("explorer"==u.name&&6==u.version?"-ie6":"")}).html("x").appendTo(e).bind({click:function(a){a.preventDefault();g.hide_error(f(this).closest("div.Zebra_Form_error_message").attr("id").replace(/^Zebra\_Form\_error\_message\_/,""),!0)},focus:function(){f(this).blur()}});var q=jQuery("<div/>",{"class":"arrow"}).appendTo(p);f("body").append(p);var l=p.outerWidth(),n=p.outerHeight(),n=q.outerWidth(),e=q.outerHeight(),m=("left"==g.settings.tips_position?k.left: k.right)-l/2;q.css("left",l/2-n/2-1);if("radio"==w.type||"checkbox"==w.type)m=k.right-l/2-c.outerWidth()/2+1;0>m&&(m=2);p.css("left",m);l=p.outerWidth();n=p.outerHeight();k=k.top-n+e/2-1;0>k&&(k=2);p.css({left:m+"px",top:k+"px",height:n-e/2+"px"});z[h]=p;P(p);p.animate({opacity:0.9},250);1!=++b||!g.settings.scroll_to_error||void 0!=d&&!1===d||f("html, body").animate({scrollTop:Math.max(parseInt(p.css("top"),10)+parseInt(p.css("height"),10)/2-f(window).height()/2,0)},0);"file"!=w.type&&c.addClass("error"); if(!g.settings.validate_all)break}}};g.submit=function(){l.trigger("submit")};g.validate_control=function(a){var d={id:a.attr("id"),name:a.attr("name"),type:H(a)},b=!0,e=r[d.id],c="radio"==d.type||"checkbox"==d.type?d.name.replace(/\[\]$/,""):d.id;a.hasClass("time")&&(c=d.name.replace(/\_(hours|minutes|seconds|ampm)$/,""));if(void 0!=e&&("none"!=a.css("display")&&"hidden"!=a.css("visibility")||a.data("file_info"))){var l=null;delete e.message;for(var h in e.rules){if(!b)break;switch(h){case "alphabet":switch(d.type){case "password":case "text":case "textarea":var k= RegExp("^[a-z"+F(e.rules[h][0]).replace(/\s/,"\\s")+"]+$","ig");""==f.trim(a.val())||k.test(a.val())||(b=!1)}break;case "alphanumeric":switch(d.type){case "password":case "text":case "textarea":k=RegExp("^[a-z0-9"+F(e.rules[h][0]).replace(/\s/,"\\s")+"]+$","ig"),""==f.trim(a.val())||k.test(a.val())||(b=!1)}break;case "compare":switch(d.type){case "password":case "text":case "textarea":f("#"+e.rules[h][0])&&a.val()==f("#"+e.rules[h][0]).val()||(b=!1)}break;case "dependencies":if(!M(c))return!0;break; case "custom":var p=!1;f.each(e.rules[h],function(c,d){if(!p){d=f.merge(f.merge([d[0]],[a.val()]),d.slice(1));var e="function"==typeof d[0]?d[0]:"function"==typeof window[d[0]]?window[d[0]]:!1;if(!1!==e)b=e.apply(e,d.slice(1));else throw b=!1,Error('Function "'+d[0]+"\" doesn't exist!");b||(custom_rule_error_message=d[d.length-1],p=!0)}});break;case "date":switch(d.type){case "text":if(""!=f.trim(a.val())){for(var k=!1,q=a.data("Zebra_DatePicker").settings.format,n="dDjlNSwFmMnYyGHghaAisU".split(""), s=[],m=[],q=F(q),v=0;v<n.length;v++)-1<(position=q.indexOf(n[v]))&&s.push({character:n[v],position:position});s.sort(function(a,b){return a.position-b.position});f.each(s,function(a,b){switch(b.character){case "d":m.push("0[1-9]|[12][0-9]|3[01]");break;case "D":m.push("[a-z]{3}");break;case "j":m.push("[1-9]|[12][0-9]|3[01]");break;case "l":m.push("[a-z]+");break;case "N":m.push("[1-7]");break;case "S":m.push("st|nd|rd|th");break;case "w":m.push("[0-6]");break;case "F":m.push("[a-z]+");break;case "m":m.push("0[1-9]|1[012]+"); break;case "M":m.push("[a-z]{3}");break;case "n":m.push("[1-9]|1[012]");break;case "Y":m.push("[0-9]{4}");break;case "y":m.push("[0-9]{2}");break;case "G":m.push("[0-9]|1[0-9]|2[0-3]");break;case "H":m.push("0[0-9]|1[0-9]|2[0-3]");break;case "g":m.push("[0-9]|1[0-2]");break;case "h":m.push("0[0-9]|1[0-2]");break;case "a":case "A":m.push("(am|pm)");break;case "i":m.push("[0-5][0-9]");break;case "s":m.push("[0-5][0-9]")}});if(0<m.length&&(s.reverse(),f.each(s,function(a,b){q=q.replace(b.character,"("+ m[m.length-a-1]+")")}),m=RegExp("^"+q+"$","ig"),segments=m.exec(a.val()))){var u=null,A=null,x=null,y="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),z="January February March April May June July August September October November December".split(" "),B=null,I=!0;s.reverse();f.each(s,function(b,c){if(!I)return!0;switch(c.character){case "m":case "n":A=parseInt(segments[b+1],10);break;case "d":case "j":u=parseInt(segments[b+1],10);break;case "D":case "l":case "F":case "M":B="D"== c.character||"l"==c.character?a.data("Zebra_DatePicker").settings.days:a.data("Zebra_DatePicker").settings.months;I=!1;f.each(B,function(a,d){if(I)return!0;if(segments[b+1].toLowerCase()==d.substring(0,"D"==c.character||"M"==c.character?3:d.length).toLowerCase()){switch(c.character){case "D":segments[b+1]=y[a].substring(0,3);break;case "l":segments[b+1]=y[a];break;case "F":segments[b+1]=z[a];A=a+1;break;case "M":segments[b+1]=z[a].substring(0,3),A=a+1}I=!0}});break;case "Y":x=parseInt(segments[b+ 1],10);break;case "y":x="19"+parseInt(segments[b+1],10)}});I&&(u||(u=1),A||(A=1),n=new Date(x,A-1,u),n.getFullYear()==x&&n.getDate()==u&&n.getMonth()==A-1&&(a.data("timestamp",Date.parse(z[A-1]+" "+u+", "+x)),k=!0))}k||(b=!1)}}break;case "datecompare":switch(d.type){case "password":case "text":case "textarea":if(void 0!=e.rules[h][0]&&void 0!=e.rules[h][1]&&f(e.rules[h][0])&&!0===g.validate_control(f(e.rules[h][0]))&&void 0!=a.data("timestamp"))switch(e.rules[h][1]){case ">":b=a.data("timestamp")> f("#"+e.rules[h][0]).data("timestamp");break;case ">=":b=a.data("timestamp")>=f("#"+e.rules[h][0]).data("timestamp");break;case "<":b=a.data("timestamp")<f("#"+e.rules[h][0]).data("timestamp");break;case "<=":b=a.data("timestamp")<=f("#"+e.rules[h][0]).data("timestamp")}else b=!1}break;case "digits":switch(d.type){case "password":case "text":case "textarea":k=RegExp("^[0-9"+F(e.rules[h][0]).replace(/\s/,"\\s")+"]+$","ig"),""==f.trim(a.val())||k.test(a.val())||(b=!1)}break;case "email":switch(d.type){case "password":case "text":case "textarea":""!= f.trim(a.val())&&null==a.val().match(/^([a-zA-Z0-9_\-\+\~\^\{\}]+[\.]?)+@{1}([a-zA-Z0-9_\-\+\~\^\{\}]+[\.]?)+\.[A-Za-z0-9]{2,}$/)&&(b=!1)}break;case "emails":switch(d.type){case "password":case "text":case "textarea":k=a.val().split(","),f.each(k,function(a,c){""!=f.trim(c)&&null==f.trim(c).match(/^([a-zA-Z0-9_\-\+\~\^\{\}]+[\.]?)+@{1}([a-zA-Z0-9_\-\+\~\^\{\}]+[\.]?)+\.[A-Za-z0-9]{2,}$/)&&(b=!1)})}break;case "filesize":switch(d.type){case "file":var t=a.data("file_info");t&&(void 0==t[2]||void 0== t[3]||0!=t[2]||parseInt(t[3],10)>parseInt(e.rules[h][0],10))&&(b=!1)}break;case "filetype":switch(d.type){case "file":if(t=a.data("file_info")){void 0==g.mimes&&f.ajax({url:decodeURIComponent(g.settings.assets_path)+"mimes.json",async:!1,success:function(a){g.mimes=a},dataType:"json"});var G=f.map(e.rules[h][0].split(","),function(a){return f.trim(a)}),C=[];f.each(g.mimes,function(a,b){(f.isArray(b)&&-1<f.inArray(t[1],b)||!f.isArray(b)&&b==t[1])&&C.push(a)});var D=!1;f.each(C,function(a,b){-1<f.inArray(b, G)&&(D=!0)});D||(b=!1)}}break;case "float":switch(d.type){case "password":case "text":case "textarea":k=RegExp("^[0-9-."+F(e.rules[h][0]).replace(/\s/,"\\s")+"]+$","ig"),""!=f.trim(a.val())&&("-"==f.trim(a.val())||"."==f.trim(a.val())||null!=a.val().match(/\-/g)&&1<a.val().match(/\-/g).length||null!=a.val().match(/\./g)&&1<a.val().match(/\./g).length||0<a.val().indexOf("-")||!k.test(a.val()))&&(b=!1)}break;case "image":switch(d.type){case "file":(t=a.data("file_info"))&&null==t[1].match(/image\/(gif|jpeg|png|pjpeg)/i)&& (b=!1)}break;case "length":switch(d.type){case "password":case "text":case "textarea":if(""!=a.val()&&void 0!=e.rules[h][0]&&a.val().length-K(a)<e.rules[h][0]||void 0!=e.rules[h][1]&&0<e.rules[h][1]&&a.val().length-K(a)>e.rules[h][1])b=!1}break;case "number":switch(d.type){case "password":case "text":case "textarea":k=RegExp("^[0-9-"+F(e.rules[h][0]).replace(/\s/,"\\s")+"]+$","ig"),""!=f.trim(a.val())&&("-"==f.trim(a.val())||null!=a.val().match(/\-/g)&&1<a.val().match(/\-/g).length||0<a.val().indexOf("-")|| !k.test(a.val()))&&(b=!1)}break;case "regexp":switch(d.type){case "password":case "text":case "textarea":k=RegExp(e.rules[h][0],"g"),""!=f.trim(a.val())&&null==k.exec(a.val())&&(b=!1)}break;case "required":switch(d.type){case "checkbox":case "radio":var E=!1;J[d.id].each(function(){this.checked&&(E=!0)});E||(b=!1);break;case "file":case "password":case "text":case "textarea":""==f.trim(a.val())&&(b=!1);break;case "select-one":if(a.hasClass("time")&&0==a.get(0).selectedIndex)d.id=d.id.replace(/\_(hours|minutes|seconds|ampm)$/, ""),b=!1;else if(a.hasClass("other")&&"other"==a.val()&&(!f("#"+d.id+"_other").length||""==f.trim(f("#"+d.id+"_other").val()))||0==a.get(0).selectedIndex)b=!1;break;case "select-multiple":-1==a.get(0).selectedIndex&&(b=!1)}break;case "upload":switch(d.type){case "file":t=a.data("file_info"),!t||t[2]&&0==t[2]||(b=!1)}break;case "url":switch(d.type){case "password":case "text":case "textarea":k=RegExp("^(http(s)?://)"+(!0===e.rules[h][0]?"":"?")+"[^\\s\\.]+\\..{2,}","i"),""==f.trim(a.val())||k.test(a.val())|| (b=!1)}}b||(l=h,e.message="custom"==h?custom_rule_error_message:g.settings.validation_rules[c][l][g.settings.validation_rules[c][l].length-("length"==l&&4==g.settings.validation_rules[c][l].length?2:1)],e.value=a.val())}}return b?!0:l};g.validate=function(){var a,d=!0;g.clear_errors();s={};for(index in r){if(!d&&!g.settings.validate_all)break;a=r[index].element;!0!==(rule_not_passed=g.validate_control(a))&&(d=!1)}d||g.show_errors();D=!0;return d};var O=function(){f.each(G,function(){var a=f(this), d=a.data("Zebra_Form_Placeholder");""!=a.val()||a.is(":focus")?d.hide():d.show()})},F=function(a){return a.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},E=function(a){if(null!=a.selectionStart)return a.selectionStart;var d=document.selection.createRange(),b=d.duplicate();if("text"==a.type)return 0-b.moveStart("character",-1E5);var e=a.value.length;b.moveToElementText(a);b.setEndPoint("StartToStart",d);return e-b.text.length},K=function(a){a=a.val();var d=a.length;return a.replace(/(\r\n|\r|\n)/g,"\r\n").length- d},P=function(a){if("explorer"==u.name&&6==u.version&&!a.data("shim")){var d=a.offset(),b=parseInt(a.css("zIndex"),10)-1,d=jQuery("<iframe>",{src:'javascript:document.write("")',scrolling:"no",frameborder:0,allowTransparency:"true","class":"Zebra_Form_error_iFrameShim",css:{zIndex:b,position:"absolute",top:d.top,left:d.left,width:a.outerWidth(),height:a.outerHeight(),filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)",display:"block"}});f("body").append(d);a.data("shim",d)}},L=function(a){var d= f("#"+a.attr("id")+"_other");"other"==a.val()?d.css("display","block"):d.css("display","none")},B=function(a){if(!f.isArray(a))return a;var d="";f.each(a,function(b){b=a[b];f.isArray(b)&&(b="|"+B(b)+"|");d+=""+b});return d},H=function(a){var d="button input:checkbox input:file input:image input:password input:radio input:submit input:text select textarea".split(" ");for(index in d)if(a.is(d[index]))return"select"==d[index]?a.attr("multiple")?"select-multiple":"select-one":d[index].replace(/input\:/, "")},M=function(a,d){void 0==d&&(d=[]);2<d.length&&d.shift();if(-1<f.inArray(a,d))throw Error('Infinite recursion detected. The loop of dependencies is created by the following elements: "'+d.join('", "')+'"');d.push(a);var b=g.settings.validation_rules[a].dependencies;"string"==typeof b[1]&&(b=b[0]);var e=!0,c;for(c in b){if(void 0!=s[c]&&void 0!=s[c][b[c]])e=s[c][b[c]];else{void 0!=g.settings.validation_rules[c]&&void 0!=g.settings.validation_rules[c].dependencies&&(e=M(c,d));if(e){var l=B(b[c]); n[c]&&n[c].conditions[l]()||(e=!1)}void 0==s[c]&&(s[c]={});void 0==s[c][b[c]]&&(s[c][b[c]]=e)}if(!e)break}return e};g.init()};f.fn.Zebra_Form=function(x){return this.each(function(){var y=new f.Zebra_Form(this,x);f(this).data("Zebra_Form",y);if("function"==typeof y.settings.on_ready)y.settings.on_ready()})}})(jQuery);